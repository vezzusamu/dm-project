\documentclass[10pt,a4paper]{report}
\usepackage[a4paper,left=25mm,right=25mm,top=25mm,bottom=20mm]{geometry}
\usepackage{amsfonts}
\usepackage{graphicx}
\graphicspath{{./images/}}
\usepackage{csquotes}
\usepackage{hyperref}
\usepackage{listings}

\title{\huge{\textbf{Data Mining report}}}
\author{Funaioli Francesca\\
Karoui Hamza\\
Francesco Mitola\\
Vezzuto Samuele}

\begin{document}

\maketitle
\tableofcontents

\chapter{Data Understanding}

The data understanding phase aims to prepare data for the following data mining tasks and to gain informations on the general properties of our data.
We started by importing the three csv files, \texttt{incidents.csv}, \texttt{povertyByStateYear.csv} and \texttt{year\_state\_district\_house.csv}.
We did some preliminary checks, for example we looked for attributes containing null values, and then we started analysing each column of each dataset.

\subsection{Incidents}

\subsubsection{Date}

We converted each \textit{date} value to a datetime object: there where no null values or NaT values.
We then plotted the distribution of the dates over the years: we noticed that the dates ranged from year 2013 to year 2018 and from year 2028 to year 2030.
Year 2013 only contains 253 incidents so we consider removing these few rows; we also decided to delete incidents recorded in years from 2028 to 2030, because they are to happen after the date the dataset was provided.

\subsubsection{State}

The \textit{state} attribute contains no null values and it has 51 unique values: the 50 states of the United States and the District of Columbia.

\subsubsection{City or county}

The \textit{city\_or\_county} attribute has no null values; we noticed it contains additional informations about the suburb or the neighborhood in brackets, e.g. ``Minneapolis (Brooklyn Center)".
We consider removing this informations in the following phases.

\subsubsection{Address}

The \textit{address} attribute contains some null values, but we believe it does not hold any statistical value, given that a more specific information about the exact location of the incident is found by using the geographical coordinates.

\subsubsection{Latitude and longitude}

The \textit{latitude} and \textit{longitude} attributes contain some null values.
We also noticed some outliers by drawing empirical box boundaries of the United States: there are some incidents recorded outside of the U.S. that we will remove in the next phase.

\subsubsection{Congressional, State House and State Senate district}

These attributes contain some null values.
We also noticed that most of the incidents happened in the state of Illinois, by plotting the top 10 incidents for each of these attributes.

\subsubsection{Age and gender attributes}

The \textit{participant\_age1} attribute contains some outliers wrt the corresponding value reported in the \textit{participant\_age\_group1}.
There also some outliers, e.g. maximum value of \textit{participant\_age1} is 311.
We noticed that most of the participants are adult males.
The attributes \textit{participant\_age1}, \textit{min\_age\_participants}, \textit{max\_age\_participants} and \textit{avg\_age\_participants} all have similar distributions.
The attributes \textit{n\_participants\_child}, \textit{n\_participants\_teen} and \textit{n\_participants\_adult} all present the same issues: they all contain some outliers given by non-numerical strings, very large numbers or negative numbers.

\subsubsection{Number of involved people}

The majority of the incidents only involve between 0 and 5 people, with almost no killed, injured, unharmed or arrested people.

\subsubsection{Notes and incident characteristics}

We consider these attributes to hold no statistical value.

\subsection{Poverty by state}

The \textit{state} attribute contains 52 unique values: 51 of them are the same as the states in the incidents dataset, the remaining one is labeled ``United States" and contains the average of the whole country.
We consider using the average to possibly fill the missing values in the following phase.

There are no \textit{povertyPercentage} values for the year 2012, but we are only interested in relating this information to the incidents dataset, which only contains relevant incidents in the range of years 2013-2018.

\subsection{Year state district house}

This dataset contains no null values.
We will only consider data in the range of years 2013-2018 for integrating this data with the incidents dataset.

\section{Data integration}

We created an additional column called \textit{total\_votes\_for\_state} in the year-state-house-district dataset; this column contains the total number of votes for each state and for each year.
We merged the incidents dataset with the poverty dataset using the attributes \textit{state} and \textit{year}.
We then merged the resulting dataset with the remaining one using the attributes \textit{state}, \textit{year} and \textit{congressional\_district}.

\section{Correlation analysis}

TODO

\chapter{Data Preparation}

The data preparation phase uses the information gained in the previous phase to select record, manage outliers and missing values and improve data quality.
We started by changing the data types of the attributes as shown in Table \ref{table01}.

\begin{table}
	\centering
	\begin{small}
	\begin{tabular}{|l|l|l|p{7cm}|}
		\hline
		\textbf{Feature Name} & \textbf{Initial Type} & \textbf{Cast Type} & \textbf{Description}\\
		\hline
		date & object & Datetime64 & date of incident occurrence\\
		\hline
		state & object & String & state where incident took place\\
		\hline
		city\_or\_county & object & String & city or county where incident took place\\
		\hline
		address & object & String & address where incident took place\\
		\hline
		latitude & float64 & float64 & latitude of the incident\\
		\hline
		longitude & float64 & float64 & longitude of the incident\\
		\hline
		congressional\_district & int64 & Int64 & congressional district where the incident took place\\
		\hline
		state\_house\_district & int64 & Int64 & state house district\\
		\hline
		state\_senate\_district & float64 & Int64 & state senate district where the incident took place\\
		\hline
		participant\_age1 & float64 & Int64 & exact age of one (randomly chosen) participant in the incident\\
		\hline
		participant\_age\_group1 & object & String & exact age group of one (randomly chosen) participant in the incident\\
		\hline
		participant\_gender1 & object & String & exact gender of one (randomly chosen) participant in the incident\\
		\hline
		min\_age\_participants & object & Int64 & minimum age of the participants in the incident\\
		\hline
		avg\_age\_participants & object & float64 & average age of the participants in the incident\\
		\hline
		max\_age\_participants & object & Int64 & maximum age of the participants in the incident\\
		\hline
		n\_participants\_child & object & Int64 & number of child participants 0-11\\
		\hline
		n\_participants\_teen & object & Int64 & number of teen participants 12-17\\
		\hline
		n\_participants\_adult & object & Int64 & number of adult participants (18 +)\\
		\hline
		n\_males & float64 & Int64 & number of males participants\\
		\hline
		n\_females & float64 & Int64 & number of females participants\\
		\hline
		n\_killed & int64 & Int64 & number of people killed\\
		\hline
		n\_injured & int64 & Int64 & number of people injured\\
		\hline
		n\_arrested & float64 & Int64 & number of arrested participants\\
		\hline
		n\_unharmed & float64 & Int64 & number of unharmed participants\\
		\hline
		n\_participants & float64 & Int64 & number of participants in the incident\\
		\hline
		notes & object & String & additional notes about the incident\\
		\hline
		incident\_characteristics1 & object & String & incident characteristics\\
		\hline
		incident\_characteristics2 & object & String & incident characteristics\\
		\hline
		year & int64 & Int64 & \\
		\hline
		povertyPercentage & float64 & float64 & poverty percentage for the corresponding state and year\\
		\hline
		party & object & String & winning party for the corresponding congressional\_district in the state, in the corresponding year\\
		\hline
		candidateVotes & int64 & Int64 & number of votes obtained by the winning party in the corresponding election\\
		\hline
		totalVotes & int64 & Int64 & total number of votes for the corresponding election\\
		\hline
		total\_votes\_for\_state & int64 & Int64 & total number of votes for each year and for each state\\
		\hline
	\end{tabular}
	\end{small}
	\caption{Features of the merged dataset}
	\label{table01}
\end{table}

We then removed negative values by setting them to NaN.

\subsubsection{Age attributes}

\chapter{Clustering}

\end{document}
